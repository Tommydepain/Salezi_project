"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[6253],{27997:(W,P,s)=>{s.d(P,{A:()=>O});var e=s(74081),_=s(72450),d=s(93415);const g=(0,_.ZP)(d.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:a})=>a?"auto 1fr":"1fr"};
`,u=(0,_.ZP)(d.x)`
  overflow-x: hidden;
`,O=({sideNav:a,children:m})=>(0,e.jsxs)(g,{hasSideNav:Boolean(a),children:[a,(0,e.jsx)(u,{paddingBottom:10,children:m})]})},16253:(W,P,s)=>{s.r(P),s.d(P,{default:()=>Z});var e=s(74081),_=s(27279),d=s(27997),g=s(74758),u=s(93415),O=s(73354),a=s(27875),m=s(70774),T=s(38101),v=s(93153),D=s(50086),E=s(32370),p=s(86967),f=s(10701),x=s(4987),B=s(83),r=s(87006),M=s(98264),h=s(84352),L=s(78665),A=s(364),I=s(61020),o=s(72450),c=s(71810),l=s(65853),q=s(40464);const Z=()=>{(0,r.go)();const{formatMessage:n}=(0,I.Z)(),{data:i,isLoading:K,isError:H,remove:Q,regenerate:G}=(0,l.u)(),[C,R]=(0,_.useState)(!1),[N,$]=(0,_.useState)(!1),[Y,z]=(0,_.useState)(),{allowedActions:j}=(0,r.ss)(c.P),F=4,J=(i?.docVersions?.length||0)+1,X=t=>{G.mutate({version:t,prefix:i?.prefix})},b=()=>{R(!C)},w=async()=>{$(!0),await Q.mutateAsync({prefix:i?.prefix,version:Y}),R(!C),$(!1)},k=t=>{z(t),R(!C)},S=n({id:(0,l.g)("plugin.name"),defaultMessage:"Documentation"});return H?(0,e.jsx)(d.A,{children:(0,e.jsx)(g.D,{children:(0,e.jsx)(u.x,{paddingTop:8,children:(0,e.jsx)(r.Hn,{})})})}):(0,e.jsxs)(d.A,{children:[(0,e.jsx)(A.q,{title:S}),(0,e.jsxs)(O.o,{"aria-busy":K,children:[(0,e.jsx)(a.T,{title:S,subtitle:n({id:(0,l.g)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:(0,e.jsx)(V,{disabled:!j.canOpen||!i?.currentVersion||!i?.prefix,href:y(`${i?.prefix}/v${i?.currentVersion}`),startIcon:(0,e.jsx)(M.Z,{}),children:n({id:(0,l.g)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),(0,e.jsxs)(g.D,{children:[K&&(0,e.jsx)(r.dO,{children:"Plugin is loading"}),i?.docVersions.length?(0,e.jsxs)(m.i,{colCount:F,rowCount:J,children:[(0,e.jsx)(T.h,{children:(0,e.jsxs)(v.Tr,{children:[(0,e.jsx)(D.Th,{children:(0,e.jsx)(E.Z,{variant:"sigma",textColor:"neutral600",children:n({id:(0,l.g)("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),(0,e.jsx)(D.Th,{children:(0,e.jsx)(E.Z,{variant:"sigma",textColor:"neutral600",children:n({id:(0,l.g)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),(0,e.jsx)(p.p,{children:i.docVersions.sort((t,U)=>t.generatedDate<U.generatedDate?1:-1).map(t=>(0,e.jsxs)(v.Tr,{children:[(0,e.jsx)(D.Td,{width:"50%",children:(0,e.jsx)(E.Z,{children:t.version})}),(0,e.jsx)(D.Td,{width:"50%",children:(0,e.jsx)(E.Z,{children:t.generatedDate})}),(0,e.jsx)(D.Td,{children:(0,e.jsxs)(f.k,{justifyContent:"end",onClick:U=>U.stopPropagation(),children:[(0,e.jsx)(x.h,{forwardedAs:"a",disabled:!j.canOpen,href:y(`${i.prefix}/v${t.version}`),noBorder:!0,icon:(0,e.jsx)(M.Z,{}),target:"_blank",rel:"noopener noreferrer",label:n({id:(0,l.g)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${t.version}`})}),j.canRegenerate?(0,e.jsx)(x.h,{onClick:()=>X(t.version),noBorder:!0,icon:(0,e.jsx)(h.Z,{}),label:n({id:(0,l.g)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${t.version}`})}):null,j.canUpdate&&t.version!==i.currentVersion?(0,e.jsx)(x.h,{onClick:()=>k(t.version),noBorder:!0,icon:(0,e.jsx)(L.Z,{}),label:n({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${t.version}`})}):null]})})]},t.version))})]}):(0,e.jsx)(r.x7,{})]}),(0,e.jsx)(r.QH,{isConfirmButtonLoading:N,onConfirm:w,onToggleDialog:b,isOpen:C})]})]})},V=(0,o.ZP)(B.Q)`
  text-decoration: none;
`,y=n=>n.startsWith("http")?n:n.startsWith("/")?`${window.strapi.backendURL}${n}`:`${window.strapi.backendURL}/${n}`},65853:(W,P,s)=>{s.d(P,{g:()=>u,u:()=>O});var e=s(27279),_=s(87006),d=s(40464),g=s(71810);const u=a=>`${g.p}.${a}`,O=()=>{const a=(0,_.lm)(),{del:m,post:T,put:v,get:D}=(0,_.kY)(),{formatAPIError:E}=(0,_.So)(),{isLoading:p,isError:f,data:x,refetch:B,error:r}=(0,d.useQuery)(["get-documentation",g.p],async()=>{const{data:o}=await D(`/${g.p}/getInfos`);return o});(0,e.useEffect)(()=>{f&&r&&a({type:"warning",message:r?E(r):{id:"notification.error"}})},[f,r,a,E]);const M=o=>{a({type:"warning",message:E(o)})},h=(o,c,l)=>{B(),a({type:o,message:{id:u(c),defaultMessage:l}})},L=(0,d.useMutation)(({prefix:o,version:c})=>m(`${o}/deleteDoc/${c}`),{onSuccess:()=>h("info","notification.delete.success","Successfully deleted documentation"),onError:M}),A=(0,d.useMutation)(({prefix:o,body:c})=>v(`${o}/updateSettings`,c),{onSuccess:()=>h("success","notification.update.success","Successfully updated settings"),onError:M}),I=(0,d.useMutation)(({prefix:o,version:c})=>T(`${o}/regenerateDoc`,{version:c}),{onSuccess:()=>h("info","notification.generate.success","Successfully generated documentation"),onError:M});return{data:x,isLoading:p,isError:f,remove:L,submit:A,regenerate:I}}}}]);
